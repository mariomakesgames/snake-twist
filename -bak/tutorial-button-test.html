<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ Snake Game - Tutorial Button Test</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .container {
            max-width: 800px;
            width: 100%;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
            font-size: 2.5em;
        }

        .test-info {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 4px solid #007bff;
        }

        .test-steps {
            background: #fff3cd;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 4px solid #ffc107;
        }

        .test-steps h3 {
            color: #856404;
            margin-top: 0;
        }

        .test-steps ol {
            color: #856404;
        }

        .controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
            margin-bottom: 20px;
        }

        .button {
            background: linear-gradient(45deg, #007bff, #0056b3);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 123, 255, 0.3);
        }

        .button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 123, 255, 0.4);
        }

        .button:active {
            transform: translateY(0);
        }

        .game-container {
            border: 2px solid #ddd;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .status {
            background: #e9ecef;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            font-weight: bold;
            color: #495057;
        }

        .debug-info {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
            font-family: monospace;
            font-size: 14px;
            max-height: 200px;
            overflow-y: auto;
        }

        .debug-info h4 {
            margin-top: 0;
            color: #495057;
        }

        .log-entry {
            margin: 5px 0;
            padding: 5px;
            border-radius: 3px;
        }

        .log-info {
            background: #d1ecf1;
            color: #0c5460;
        }

        .log-success {
            background: #d4edda;
            color: #155724;
        }

        .log-warning {
            background: #fff3cd;
            color: #856404;
        }

        .log-error {
            background: #f8d7da;
            color: #721c24;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ Snake Game - Tutorial Button Test</h1>
        
        <div class="test-info">
            <h3>æµ‹è¯•ç›®æ ‡</h3>
            <p>éªŒè¯tutorial popupçš„continueæŒ‰é’®ç‚¹å‡»åŠŸèƒ½æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚ä¿®å¤äº†æŒ‰é’®æ–‡æœ¬äº¤äº’æ€§å’Œç§»åŠ¨è¾“å…¥ç®¡ç†å™¨å¹²æ‰°çš„é—®é¢˜ã€‚</p>
        </div>
        
        <div class="test-steps">
            <h3>æµ‹è¯•æ­¥éª¤</h3>
            <ol>
                <li>å¼€å§‹æ¸¸æˆï¼Œåƒç»¿è‰²é£Ÿç‰©ï¼ˆåº”è¯¥æ˜¾ç¤ºæ•™ç¨‹ï¼Œæ¸¸æˆæš‚åœï¼‰</li>
                <li>ç‚¹å‡»"Continue"æŒ‰é’®ï¼ˆåº”è¯¥å…³é—­æ•™ç¨‹å¹¶æ¢å¤æ¸¸æˆï¼‰</li>
                <li>ç»§ç»­æ¸¸æˆï¼Œåƒå…¶ä»–é¢œè‰²çš„é£Ÿç‰©ï¼ˆæ¯ç§ç¬¬ä¸€æ¬¡éƒ½ä¼šæ˜¾ç¤ºæ•™ç¨‹ï¼‰</li>
                <li>æµ‹è¯•ç‚¹å‡»æŒ‰é’®çš„ä¸åŒåŒºåŸŸï¼ˆèƒŒæ™¯ã€æ–‡å­—ï¼‰</li>
                <li>æ£€æŸ¥æ§åˆ¶å°æ—¥å¿—ï¼Œç¡®è®¤æŒ‰é’®ç‚¹å‡»äº‹ä»¶æ­£å¸¸è§¦å‘</li>
                <li>åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šæµ‹è¯•è§¦æ‘¸ç‚¹å‡»åŠŸèƒ½</li>
            </ol>
        </div>
        
        <div class="controls">
            <button class="button" onclick="startNewGame()">å¼€å§‹æ–°æ¸¸æˆ</button>
            <button class="button" onclick="resetTutorials()">é‡ç½®æ•™ç¨‹</button>
            <button class="button" onclick="showTutorialStatus()">æ˜¾ç¤ºæ•™ç¨‹çŠ¶æ€</button>
            <button class="button" onclick="clearLogs()">æ¸…é™¤æ—¥å¿—</button>
        </div>
        
        <div class="game-container">
            <div id="game-root"></div>
        </div>
        
        <div class="status" id="status">
            çŠ¶æ€: ç­‰å¾…å¼€å§‹æ¸¸æˆ...
        </div>

        <div class="debug-info">
            <h4>è°ƒè¯•æ—¥å¿—</h4>
            <div id="debugLogs"></div>
        </div>
    </div>

    <script type="module">
        import { createApp } from 'https://unpkg.com/vue@3/dist/vue.esm-browser.js';
        import SnakeGame from './src/PhaserGame.tsx';
        
        // åˆ›å»ºVueåº”ç”¨
        const app = createApp({
            components: {
                SnakeGame
            },
            template: '<SnakeGame />'
        });
        
        // æŒ‚è½½åˆ°DOM
        app.mount('#game-root');
        
        // å…¨å±€å‡½æ•°
        window.startNewGame = function() {
            const gameState = window.gameState;
            if (gameState) {
                gameState.score = 0;
                gameState.savedSnakeLength = undefined;
                gameState.isReviving = false;
                gameState.isGameOver = false;
                gameState.isPaused = false;
                
                // é‡æ–°åŠ è½½é¡µé¢ä»¥å¼€å§‹æ–°æ¸¸æˆ
                location.reload();
            }
        };
        
        window.resetTutorials = function() {
            try {
                localStorage.removeItem('snake_food_tutorials_shown');
                log('æ•™ç¨‹å·²é‡ç½®ï¼Œé‡æ–°å¼€å§‹æ¸¸æˆå°†æ˜¾ç¤ºæ‰€æœ‰æ•™ç¨‹', 'success');
                document.getElementById('status').innerHTML = 'çŠ¶æ€: æ•™ç¨‹å·²é‡ç½®ï¼Œé‡æ–°å¼€å§‹æ¸¸æˆå°†æ˜¾ç¤ºæ‰€æœ‰æ•™ç¨‹';
            } catch (error) {
                log('é‡ç½®æ•™ç¨‹å¤±è´¥: ' + error.message, 'error');
                document.getElementById('status').innerHTML = 'çŠ¶æ€: é‡ç½®æ•™ç¨‹å¤±è´¥: ' + error.message;
            }
        };
        
        window.showTutorialStatus = function() {
            try {
                const savedState = localStorage.getItem('snake_food_tutorials_shown');
                const shownTutorials = savedState ? JSON.parse(savedState) : [];
                log(`å·²æ˜¾ç¤ºçš„æ•™ç¨‹: ${shownTutorials.join(', ') || 'æ— '}`, 'info');
                document.getElementById('status').innerHTML = `çŠ¶æ€: å·²æ˜¾ç¤º ${shownTutorials.length} ä¸ªæ•™ç¨‹`;
            } catch (error) {
                log('è·å–æ•™ç¨‹çŠ¶æ€å¤±è´¥: ' + error.message, 'error');
            }
        };
        
        window.clearLogs = function() {
            document.getElementById('debugLogs').innerHTML = '';
        };
        
        // æ—¥å¿—å‡½æ•°
        function log(message, type = 'info') {
            const logsContainer = document.getElementById('debugLogs');
            const logEntry = document.createElement('div');
            logEntry.className = `log-entry log-${type}`;
            
            const timestamp = new Date().toLocaleTimeString();
            logEntry.innerHTML = `[${timestamp}] ${message}`;
            
            logsContainer.appendChild(logEntry);
            logsContainer.scrollTop = logsContainer.scrollHeight;
            
            // é™åˆ¶æ—¥å¿—æ•°é‡
            while (logsContainer.children.length > 50) {
                logsContainer.removeChild(logsContainer.firstChild);
            }
        }
        
        // ç›‘å¬æ§åˆ¶å°æ—¥å¿—
        const originalLog = console.log;
        const originalWarn = console.warn;
        const originalError = console.error;
        
        console.log = function(...args) {
            originalLog.apply(console, args);
            log(args.join(' '), 'info');
        };
        
        console.warn = function(...args) {
            originalWarn.apply(console, args);
            log(args.join(' '), 'warning');
        };
        
        console.error = function(...args) {
            originalError.apply(console, args);
            log(args.join(' '), 'error');
        };
        
        // é¡µé¢åŠ è½½å®Œæˆ
        window.addEventListener('load', () => {
            log('é¡µé¢åŠ è½½å®Œæˆï¼Œå¼€å§‹æµ‹è¯•tutorialæŒ‰é’®åŠŸèƒ½', 'success');
        });
        
        // ç›‘å¬æ¸¸æˆçŠ¶æ€å˜åŒ–
        setInterval(() => {
            const gameState = window.gameState;
            if (gameState) {
                const status = document.getElementById('status');
                if (gameState.isGameOver) {
                    status.innerHTML = 'çŠ¶æ€: æ¸¸æˆç»“æŸ';
                } else if (gameState.isPaused) {
                    status.innerHTML = 'çŠ¶æ€: æ¸¸æˆæš‚åœ';
                } else {
                    status.innerHTML = `çŠ¶æ€: æ¸¸æˆä¸­ (åˆ†æ•°: ${gameState.score})`;
                }
            }
        }, 1000);
    </script>
</body>
</html> 